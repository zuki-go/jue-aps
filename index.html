<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Juegos FlixPe</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>
  <style>
    .shimmer {
      background: linear-gradient(to right, #2a2a2a 0%, #3a3a3a 20%, #2a2a2a 40%, #2a2a2a 100%);
      background-size: 1000px 100%;
      animation: shimmer 2s infinite linear;
    }
    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }
  </style>
</head>
<body class="bg-black text-white">


  <header id="main-header" class="fixed top-0 left-0 w-full z-50 bg-black/40 backdrop-blur-md py-4 px-6 flex justify-between items-center border-b border-gray-700">
    <h1 class="text-xl font-bold">Juegos FlixPe</h1>
    <button onclick="activarBuscador()">
      <i data-lucide="search" class="w-6 h-6"></i>
    </button>
  </header>


  <div id="buscador-zona" class="hidden fixed top-0 left-0 w-full h-20 bg-black flex items-center justify-center px-4 z-50 gap-2 border-b border-gray-700">
    <input id="buscador-juegos" type="text" placeholder="Buscar juegos..." class="w-full max-w-md px-4 py-2 rounded-full text-black focus:outline-none" oninput="buscarJuegos(this.value)" />
    <button onclick="cerrarBuscador()" class="text-white">
      <i data-lucide="x" class="w-6 h-6"></i>
    </button>
  </div>


  <section id="seccion-portada" class="relative h-[530px] flex items-end justify-center pt-24 bg-gradient-to-b from-purple-800 via-black to-black">
    <img src="https://media.themoviedb.org/t/p/w220_and_h330_face/1Ak4tIb7EF7DXWmgylCmVSXC7fT.jpg" class="absolute inset-0 w-full h-full object-cover opacity-10" />
    <div class="relative z-10 text-center mb-6">
      <div class="flex justify-center mb-4">
        <img src="https://i.ibb.co/dsFWWx3x/Flixpe-logo-sin-fondo.png" class="w-20 h-20 object-contain" alt="Flixpe Logo" />
      </div>
      <h2 class="text-3xl md:text-4xl font-bold mb-2">Acceso ilimitado a juegos exclusivos</h2>
      <p class="text-lg text-gray-300">Solo en FlixPe, disfruta sin anuncios ni compras.</p>
    </div>
  </section>


  <div id="contenedor-juegos" class="space-y-4 p-4 pt-6 mt-2"></div>

  <script>
    const secciones = ['Nuevo de flixpe', 'Entretenimiento', 'Para ti', 'Terror y Aventuras'];

    const dataJuegos = {
      'Nuevo de flixpe': [
        { imagen: 'https://i.ibb.co/4wm3zNF5/Flix-tv-logo.png', titulo: 'FlixpeTV', genero: 'Entretenimiento', diferencia: 'app', url: 'https://flixpe.tv' },
      ],
      'Entretenimiento': [
        { imagen: 'https://i.ibb.co/4wm3zNF5/Flix-tv-logo.png', titulo: 'FlixpeTV', genero: 'Entretenimiento', diferencia: 'app', url: 'https://flixpe.tv' },
      ],
    };

    const contenedor = document.getElementById("contenedor-juegos");

    function renderSecciones(extraMargin = false) {
      contenedor.innerHTML = "";
      contenedor.className = `space-y-4 p-4 pt-6 ${extraMargin ? 'mt-20' : 'mt-2'}`;
      secciones.forEach((titulo) => {
        const juegos = dataJuegos[titulo] || [];
        if (juegos.length === 0) return;

        const div = document.createElement("div");
        div.innerHTML = `
          <h3 class="text-xl font-semibold px-2">${titulo}</h3>
          <div class="flex overflow-x-auto gap-4 py-2 px-2">
            ${juegos.map(juego => {
              const imagen = juego.imagen?.startsWith('http') ? 
                `<img src="${juego.imagen}" class="w-full h-36 rounded-lg object-cover" />` :
                `<div class="w-full h-36 rounded-lg shimmer"></div>`;
              const titulo = juego.titulo?.trim() ? `<p class="mt-2 text-sm font-medium">${juego.titulo}</p>` : `<div class="mt-2 h-4 w-24 shimmer rounded"></div>`;
              const genero = juego.genero?.trim() ? `<p class="text-xs text-gray-400">${juego.genero}</p>` : `<div class="mt-1 h-3 w-16 shimmer rounded"></div>`;
              const enlace = juego.url ? `onclick="window.open('${juego.url}', '_blank')"` : '';

              return `
                <div class="w-36 flex-shrink-0 cursor-pointer" ${enlace}>
                  ${imagen}
                  ${titulo}
                  ${genero}
                </div>
              `;
            }).join('')}
          </div>
        `;
        contenedor.appendChild(div);
      });
    }

    function normalizarTexto(texto) {
      return texto.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[.,:;¿?!¡]/g, "").trim();
    }

    function activarBuscador() {
      document.getElementById("main-header").classList.add("hidden");
      document.getElementById("buscador-zona").classList.remove("hidden");
      document.getElementById("seccion-portada").classList.add("hidden");
      document.getElementById("buscador-juegos").focus();
    }

    function cerrarBuscador() {
      document.getElementById("main-header").classList.remove("hidden");
      document.getElementById("buscador-zona").classList.add("hidden");
      document.getElementById("seccion-portada").classList.remove("hidden");
      document.getElementById("buscador-juegos").value = "";
      renderSecciones(false);
    }

    function buscarJuegos(texto) {
      const query = normalizarTexto(texto);
      contenedor.innerHTML = "";
      contenedor.className = "space-y-4 p-4 pt-6 mt-20"; // MÁS ABAJO

      const juegosFiltrados = [];
      for (let key in dataJuegos) {
        juegosFiltrados.push(...dataJuegos[key]);
      }

      const filtrados = juegosFiltrados.filter(juego => {
        const titulo = normalizarTexto(juego.titulo || "");
        const genero = normalizarTexto(juego.genero || "");
        const tipo = normalizarTexto(juego.diferencia || "");

        if (query.includes("flixpe juegos")) return tipo !== "app";
        if (query.includes("flixpe app") || query.includes("app")) return tipo === "app";

        return titulo.includes(query) || genero.includes(query) || tipo.includes(query);
      });

      if (filtrados.length === 0) {
        contenedor.innerHTML = '<p class="text-center text-gray-400 mt-8">No se encontraron resultados.</p>';
        return;
      }

      const div = document.createElement("div");
      div.innerHTML = `
        <h3 class="text-xl font-semibold px-2">Resultados</h3>
        <div class="flex overflow-x-auto gap-4 py-2 px-2">
          ${filtrados.map(juego => `
            <div class="w-36 flex-shrink-0 cursor-pointer" onclick="window.open('${juego.url}', '_blank')">
              <img src="${juego.imagen}" class="w-full h-36 rounded-lg object-cover" />
              <p class="mt-2 text-sm font-medium">${juego.titulo}</p>
              <p class="text-xs text-gray-400">${juego.genero}</p>
            </div>
          `).join('')}
        </div>
      `;
      contenedor.appendChild(div);
    }

    renderSecciones(false);
    lucide.createIcons();
  </script>
</body>
</html>
